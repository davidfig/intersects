"use strict";function n(n,r,t,e,i,u,o){var l=t/2,c=e/2,f=Math.abs(i-(n+t/2)),a=Math.abs(u-(r+e/2));if(f>l+o||a>c+o)return!1;if(f<=l||a<=c)return!0;var s=f-l,h=a-c;return s*s+h*h<=o*o}function r(n,r,t,e,i){var u=e-n,o=i-r;return u*u+o*o<=t*t}function t(t,e,i,u,o,l,c,f){f=f||1;var a=0;return a+=r(t,e,i,u,o)?1:0,a+=r(t,e,i,u+l,o)?1:0,a+=r(t,e,i,u,o+c)?1:0,0===(a+=r(t,e,i,u+l,o+c)?1:0)?n(u,o,l,c,t,e,i):a>=1&&a<=3||(4===a?!(r(t,e,i-f,u,o)&&r(t,e,i-f,u+l,o)&&r(t,e,i-f,u,o+c)&&r(t,e,i-f,u+l,o+c)):void 0)}function e(n,r,t,e,i,u,o,l){i-=n,o-=n,u-=r,l-=r;var c=Math.pow(o-i,2)/t/t+Math.pow(l-u,2)/e/e,f=2*i*(o-i)/t/t+2*u*(l-u)/e/e,a=f*f-4*c*(i*i/t/t+u*u/e/e-1);if(0===a){var s=-f/2/c;return s>=0&&s<=1}if(a>0){var h=Math.sqrt(a),v=(-f+h)/2/c,p=(-f-h)/2/c;return v>=0&&v<=1||p>=0&&p<=1}return!1}function i(n,r,t,i,u,o,l,c){return e(u,o,l,c,n,r,t,i)}function u(n,r,t,e,i,u){return i>=n&&i<=n+t&&u>=r&&u<=r+e}function o(n,r,t,i,o,l,c,f){return u(o,l,c,f,n,r)||e(n,r,t,i,o,l,o+c,l)||e(n,r,t,i,o,l+f,o+c,l+f)||e(n,r,t,i,o,l,o,l+f)||e(n,r,t,i,o+c,l,o+c,l+f)}function l(n,r,t,e,i,u,o,l){var c=t-n,f=e-r,a=o-i,s=l-u,h=(-f*(n-i)+c*(r-u))/(-a*f+c*s),v=(a*(r-u)-s*(n-i))/(-a*f+c*s);return h>=0&&h<=1&&v>=0&&v<=1}function c(n,r,t,e,i){const u=Math.atan2(e-r,t-n)-Math.PI/2,o=i/2,l=Math.cos(u)*o,c=Math.sin(u)*o;return[n-l,r-c,t-l,e-c,t+l,e+c,n+l,r+c]}function f(n,r){for(var t,e,i,u,o,l,c=n,f=r,a=[c,f],s=0;s<a.length;s++)for(var h=a[s],v=0;v<h.length;v+=2){var p=(v+2)%h.length,M={x:h[p+1]-h[v+1],y:h[v]-h[p]};for(t=e=null,l=0;l<c.length;l+=2)i=M.x*c[l]+M.y*c[l+1],(null===t||i<t)&&(t=i),(null===e||i>e)&&(e=i);for(u=o=null,l=0;l<f.length;l+=2)i=M.x*f[l]+M.y*f[l+1],(null===u||i<u)&&(u=i),(null===o||i>o)&&(o=i);if(e<u||o<t)return!1}return!0}function a(n,r,t,e,i,u,o){return o=o||1,Math.abs(s(n,r,t,e)-(s(n,r,i,u)+s(t,e,i,u)))<=o}function s(n,r,t,e){return Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2))}function h(n,r,t,e){var i,u,o=n.length,l=!1;for(i=0,u=o-2;i<o;i+=2)n[i+1]>t!=n[u+1]>t&&r<(n[u]-n[i])*(t-n[i+1])/(n[u+1]-n[i+1])+n[i]&&(l=!l),u=i;if(l)return!0;for(i=0;i<o;i+=2){var c,f,s=n[i],h=n[i+1];if(i===o-2?(c=n[0],f=n[1]):(c=n[i+2],f=n[i+3]),a(s,h,c,f,r,t,e))return!0}return!1}function v(n,r,t,e,i,u){var o=i.length;if(h(i,n,r,u))return!0;for(var c=0;c<o;c+=2){var f=(c+2)%o;if(l(n,r,t,e,i[c],i[c+1],i[f],i[f+1]))return!0}return!1}function p(n,r,t,e,i,u,o,a,s,h){return s||h?function(n,r,t,e,i,u,o,l,a,s){if(a&&s)return f(c(n,r,t,e,a),c(i,u,o,l,s));if(a)return v(i,u,o,l,c(n,r,t,e,a));if(s)return v(n,r,t,e,c(i,u,o,l,a))}(n,r,t,e,i,u,o,a,s,h):l(n,r,t,e,i,u,o,a)}function M(n,r,t,e,i,o,l,c){return!(!u(i,o,l,c,n,r)&&!u(i,o,l,c,t,e))||(p(n,r,t,e,i,o,i+l,o)||p(n,r,t,e,i+l,o,i+l,o+c)||p(n,r,t,e,i,o+c,i+l,o+c)||p(n,r,t,e,i,o,i,o+c))}function g(n,r,t,e,i){return f(n,[r,t,r+e,t,r+e,t+i,r,t+i])}function x(n,t,e,i,u,o,l){if(r(n,t,e,i,u))return!0}var b,y,P;function C(){b=[],y=[];for(var n=0;n<=10;n++){var r=4<<n;b[n]=.5/Math.cos(4*Math.acos(0)/r),y[n]=.5/(Math.cos(2*Math.acos(0)/r)*Math.cos(2*Math.acos(0)/r))}P=!0}function O(n,r,t,e,i,u,o){for(var l=1;l<=10;l++){var c=(t+i)*b[l],f=(e+u)*b[l],a=n-c,s=r-f;if(a*a+s*s<=o)return!0;var h=i-c,v=u-f;if(a*h+s*v>=0&&a*h+s*v<=h*h+v*v&&(s*h-a*v>=0||o*(h*h+v*v)>=(s*h-a*v)*(s*h-a*v)))return!0;var p=t-c,M=e-f;if(a*p+s*M>=0&&a*p+s*M<=p*p+M*M&&(s*p-a*M<=0||o*(p*p+M*M)>=(s*p-a*M)*(s*p-a*M)))return!0;var g=(t+c)*y[l],x=(e+f)*y[l];if((g-n)*(g-n)+(x-r)*(x-r)<o)i=c,u=f;else{var P=c-g+c,C=f-x+f;if(!((P-n)*(P-n)+(C-r)*(C-r)<o)){var O=g-c,B=x-f;if(s*O-a*B<=0||o*(O*O+B*B)>(s*O-a*B)*(s*O-a*B))if(a*O+s*B>0){if(Math.abs(a*O+s*B)<=O*O+B*B||(n-g)*(t-g)+(r-x)*(e-x)>=0){i=c,u=f;continue}}else if(-(a*O+s*B)<=O*O+B*B||(n-P)*(i-P)+(r-C)*(u-C)>=0){t=c,e=f;continue}return!1}t=c,e=f}}return!1}function B(n,r,t,e,i,u,o){return function(n,r,t,e,i,u,o){P||C();var l=Math.abs(i-n),c=Math.abs(u-r);return l*l+(e-c)*(e-c)<=o*o||(t-l)*(t-l)+c*c<=o*o||l*e+c*t<=t*e||(l*e+c*t-t*e)*(l*e+c*t-t*e)<=o*o*(t*t+e*e)&&l*t-c*e>=-e*e&&l*t-c*e<=t*t||((l-t)*(l-t)+(c-e)*(c-e)<=o*o||l<=t&&c-o<=e||c<=e&&l-o<=t)&&O(l,c,t,0,0,e,o*o)}(n,r,t,e,i,u,o)}function L(n,r,t,e,i,u,o){var l=[i-n,u-r],c=[t-n,e-r],f=w(c,c),a=w(l,c)/f,s=[c[0]*(a=(a=a<0?0:a)>1?1:a)+n-i,c[1]*a+r-u];return w(s,s)<=o*o}function w(n,r){return n[0]*r[0]+n[1]*r[1]}function E(n,r,t,e,i){if(h(n,r,t,i))return!0;for(var u=n.length,o=0;o<u-2;o+=2)if(L(n[o],n[o+1],n[o+2],n[o+3],r,t,e))return!0;return L(n[0],n[1],n[u-2],n[u-1],r,t,e)}function d(n,t,e,i,u,o,l,c){return c=c||1,L(i,u,o,l,n,t,e)&&!(r(n,t,e-c,i,u)&&r(n,t,e-c,o,l))}function q(n,t,e,i,u,o){return o=o||1,r(n,t,e,i,u)&&!r(n,t,e-o,i,u)}function I(n,r,t,e,u){if(h(n,r,t))return!0;for(var o=n.length,l=0;l<o-2;l+=2)if(i(n[l],n[l+1],n[l+2],n[l+3],r,t,e,u))return!0;return i(n[0],n[1],n[o-2],n[o-1],r,t,e,u)}function m(n,r,t,e,i,u){return Math.pow(i-n,2)/(t*t)+Math.pow(u-r,2)/(e*e)<=1}var j=self.Intersects={boxBox:function(n,r,t,e,i,u,o,l){return n<i+o&&n+t>i&&r<u+l&&r+e>u},boxCircle:n,boxCircleOutline:function(n,r,e,i,u,o,l,c){return t(u,o,l,n,r,e,i,c)},boxEllipse:function(n,r,t,e,i,u,l,c){return o(i,u,l,c,n,r,t,e)},boxLine:function(n,r,t,e,i,u,o,l){return M(i,u,o,l,n,r,t,e)},boxPolygon:function(n,r,t,e,i){return g(i,n,r,t,e)},boxPoint:u,circleBox:function(r,t,e,i,u,o,l){return n(i,u,o,l,r,t,e)},circleCircle:function(n,r,t,e,i,u){var o=n-e,l=i-r,c=t+u;return o*o+l*l<=c*c},circleCircleOutline:function(n,r,t,e,i,u){return x(e,i,u,n,r)},circleEllipse:function(n,r,t,e,i,u,o){return B(e,i,u,o,n,r,t)},circleLine:function(n,r,t,e,i,u,o){return L(e,i,u,o,n,r,t)},circlePolygon:function(n,r,t,e,i){return E(e,n,r,t,i)},circlePoint:r,circleOutlineBox:t,circleOutlineCircle:x,circleOutlineLine:d,circleOutlinePoint:q,ellipseBox:o,ellipseCircle:B,ellipseEllipse:function(n,r,t,e,i,u,o,l){return function(n,r,t,e,i,u,o,l){P||C();var c=Math.abs(i-n)*l,f=Math.abs(u-r)*o;t*=l;var a=o*l;return c*c+((e*=o)-f)*(e-f)<=a*a||(t-c)*(t-c)+f*f<=a*a||c*e+f*t<=t*e||(c*e+f*t-t*e)*(c*e+f*t-t*e)<=a*a*(t*t+e*e)&&c*t-f*e>=-e*e&&c*t-f*e<=t*t||((c-t)*(c-t)+(f-e)*(f-e)<=a*a||c<=t&&f-a<=e||f<=e&&c-a<=t)&&O(c,f,t,0,0,e,a*a)}(n,r,t,e,i,u,o,l)},ellipseLine:e,ellipsePolygon:function(n,r,t,e,i){return I(i,n,r,t,e)},ellipsePoint:m,lineBox:M,lineCircle:L,lineCircleOutline:function(n,r,t,e,i,u,o,l){return d(i,u,o,n,r,t,e,l)},lineEllipse:i,lineLine:p,linePolygon:v,linePoint:a,polygonBox:g,polygonCircle:E,polygonEllipse:I,polygonLine:function(n,r,t,e,i,u){return v(r,t,e,i,n,u)},polygonPolygon:f,polygonPoint:h,pointBox:function(n,r,t,e,i,o){return u(t,e,i,o,n,r)},pointCircle:function(n,t,e,i,u){return r(e,i,u,n,t)},pointCircleOutline:function(n,r,t,e,i,u){return q(n,r,t,e,i,u)},pointEllipse:function(n,r,t,e,i,u){return m(t,e,i,u,n,r)},pointLine:function(n,r,t,e,i,u){return a(t,e,i,u,n,r)},pointPolygon:function(n,r,t,e){return h(t,n,r,e)}};module.exports=j;
